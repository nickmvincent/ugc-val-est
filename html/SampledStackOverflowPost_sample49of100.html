Answered posted on: 2013-11-13 08:08:37+00:00
<a<p>I'm not completely sure what you're asking, so clarification would be helpful. Particularly, what do you mean when you say:
"if I refresh the page, some problems appears, because we have the createUser url but with showUserInfo."</p>

<p>What is the problem that you are seeing? I'm going to take a you want to avoid double posting, so using a PRG pattern may solve your issue:
***<a href="http://en.wikipedia.org/wiki/Post/Redirect/Get" rel="nofollow">http://en.wikipedia.org/wiki/Post/Redirect/Get</a></p>

<p>However, if you're doing an AJAX call, this shouldn't be the case. If you want to avoid a refresh after the submit, can you instead of calling the form's submit, do something like this?</p>

<pre><code>Save: function() {
           $.ajax({
               type: "POST",
               url: "/createUser",
               data: $("#addUserForm").serialize(),
               success: function(data)
               {
                   // javascript to update page
               }
            });
        }
    },
</code></pre>

<p>More information on JQuery ajax: <a href="http://api.jquery.com/jQuery.ajax/" rel="nofollow">http://api.jquery.com/jQuery.ajax/</a>
If the post is supposed to update something you can return a json on the server side, and have the javascript success function parse it and update the page accordingly.</p>

<p>If you actually want the refresh to occur, then:
Is the "/createUser" url returning something different from the get? If not, you can change the post handler to return a redirect to the GET page:</p>

<pre><code>@RequestMapping(method = RequestMethod.POST, value = "/createUser")
public String createUser(Model model, @ModelAttribute UserBeanForm userBeanForm, BindingResult result) {
    ...
    ...
    return "redirect:/showUserInfo"
}
</code></pre>

<p>If you want to store some data created by the post and are using Spring 3.1, look into flash attributes:
<a href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-flash-attributes" rel="nofollow">http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-flash-attributes</a></p>

<p>You can change your post handler such, and adjust your get handler to somehow use that data or pass it on to the view:</p>

<pre><code>@RequestMapping(method = RequestMethod.POST, value = "/createUser")
public String createUser(Model model, @ModelAttribute UserBeanForm userBeanForm, BindingResult result, RedirectAttributes redirectAttributes) {
    ...
    ...
    // add data for get handler to use
    redirectAttributes.addFlashAttribute("someString", "stringValue");
    redirectAttributes.addFlashAttribute("someInt", 10);

    return "redirect:/showUserInfo"
}
</code></pre>

<p>I didn't get a chance to actually test this, but hopefully it works.</
