<a<p>I have came across the very-very-same problem.</p>

<p>In short:</p>

<ul>
<li>Willing to have original CSS in an "internal" dir (Resources/assets/css/a.css)</li>
<li>Willing to have the images in the "public" dir (Resources/public/images/devil.png)</li>
<li>Willing that twig takes that CSS, recompiles it into web/css/a.css and make it point the image in /web/bundles/mynicebundle/images/devil.png</li>
</ul>

<p>I have made a test with ALL possible (sane) combinations of the following:</p>

<ul>
<li>@notation, relative notation</li>
<li>Parse with cssrewrite, without it</li>
<li>CSS image background vs direct &lt;img> tag src= to the very same image than CSS</li>
<li>CSS parsed with assetic and also without parsing with assetic direct output</li>
<li>And all this multiplied by trying a "public dir" (as <code>Resources/public/css</code>) with the CSS and a "private" directory (as <code>Resources/assets/css</code>).</li>
</ul>

<p>This gave me a total of 14 combinations on the same twig, and this route was launched from</p>

<ul>
<li>"/app_dev.php/"</li>
<li>"/app.php/"</li>
<li>and "/"</li>
</ul>

<p>thus giving 14 x 3 = 42 tests.</p>

<p>Additionally, all this has been tested working in a subdirectory, so there is no way to fool by giving absolute URLs because they would simply not work.</p>

<p>The tests were two unnamed images and then divs named from 'a' to 'f' for the CSS built FROM the public folder and named 'g to 'l' for the ones built from the internal path.</p>

<p>I observed the following:</p>

<p>Only 3 of the 14 tests were shown adequately on the three URLs. And NONE was from the "internal" folder (Resources/assets). It was a pre-requisite to have the spare CSS PUBLIC and then build with assetic FROM there.</p>

<p>These are the results:</p>

<ol>
<li><p>Result launched with /app_dev.php/
<img src="https://i.stack.imgur.com/XF7n2.jpg" alt="Result launched with /app_dev.php/"></p></li>
<li><p>Result launched with /app.php/
<img src="https://i.stack.imgur.com/V93Zs.jpg" alt="Result launched with /app.php/"></p></li>
<li><p>Result launched with /
<img src="https://i.stack.imgur.com/M6aMj.jpg" alt="enter image description here"></p></li>
</ol>

<p>So... ONLY
 - The second image
 - Div B
 - Div C
are the allowed syntaxes.</p>

<p>Here there is the TWIG code:</p>

<pre><code>&lt;html&gt;
    &lt;head&gt;
            {% stylesheets 'bundles/commondirty/css_original/container.css' filter="cssrewrite" %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

    {# First Row: ABCDEF #}

            &lt;link href="{{ '../bundles/commondirty/css_original/a.css' }}" rel="stylesheet" type="text/css" /&gt;
            &lt;link href="{{ asset( 'bundles/commondirty/css_original/b.css' ) }}" rel="stylesheet" type="text/css" /&gt;

            {% stylesheets 'bundles/commondirty/css_original/c.css' filter="cssrewrite" %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

            {% stylesheets 'bundles/commondirty/css_original/d.css' %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

            {% stylesheets '@CommonDirtyBundle/Resources/public/css_original/e.css' filter="cssrewrite" %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

            {% stylesheets '@CommonDirtyBundle/Resources/public/css_original/f.css' %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

    {# First Row: GHIJKL #}

            &lt;link href="{{ '../../src/Common/DirtyBundle/Resources/assets/css/g.css' }}" rel="stylesheet" type="text/css" /&gt;
            &lt;link href="{{ asset( '../src/Common/DirtyBundle/Resources/assets/css/h.css' ) }}" rel="stylesheet" type="text/css" /&gt;

            {% stylesheets '../src/Common/DirtyBundle/Resources/assets/css/i.css' filter="cssrewrite" %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

            {% stylesheets '../src/Common/DirtyBundle/Resources/assets/css/j.css' %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

            {% stylesheets '@CommonDirtyBundle/Resources/assets/css/k.css' filter="cssrewrite" %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

            {% stylesheets '@CommonDirtyBundle/Resources/assets/css/l.css' %}
                &lt;link href="{{ asset_url }}" rel="stylesheet" type="text/css" /&gt;
            {% endstylesheets %}

    &lt;/head&gt;
    &lt;body&gt;
        &lt;div class="container"&gt;
            &lt;p&gt;
                &lt;img alt="Devil" src="../bundles/commondirty/images/devil.png"&gt;
                &lt;img alt="Devil" src="{{ asset('bundles/commondirty/images/devil.png') }}"&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;div class="a"&gt;
                    A
                &lt;/div&gt;
                &lt;div class="b"&gt;
                    B
                &lt;/div&gt;
                &lt;div class="c"&gt;
                    C
                &lt;/div&gt;
                &lt;div class="d"&gt;
                    D
                &lt;/div&gt;
                &lt;div class="e"&gt;
                    E
                &lt;/div&gt;
                &lt;div class="f"&gt;
                    F
                &lt;/div&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;div class="g"&gt;
                    G
                &lt;/div&gt;
                &lt;div class="h"&gt;
                    H
                &lt;/div&gt;
                &lt;div class="i"&gt;
                    I
                &lt;/div&gt;
                &lt;div class="j"&gt;
                    J
                &lt;/div&gt;
                &lt;div class="k"&gt;
                    K
                &lt;/div&gt;
                &lt;div class="l"&gt;
                    L
                &lt;/div&gt;
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The container.css:</p>

<pre><code>div.container
{
    border: 1px solid red;
    padding: 0px;
}

div.container img, div.container div 
{
    border: 1px solid green;
    padding: 5px;
    margin: 5px;
    width: 64px;
    height: 64px;
    display: inline-block;
    vertical-align: top;
}
</code></pre>

<p>And a.css, b.css, c.css, etc: all identical, just changing the color and the CSS selector.</p>

<pre><code>.a
{
    background: red url('../images/devil.png');
}
</code></pre>

<p>The "directories" structure is:</p>

<p><em>Directories</em>
<img src="https://i.stack.imgur.com/uaXOE.jpg" alt="Directories"></p>

<p><strong>All this came, because I did not want the individual original files exposed to the public, specially if I wanted to play with "less" filter or "sass" or similar... I did not want my "originals" published, only the compiled one.</strong></p>

<p>But there are <strong>good news</strong>. If you don't want to have the "spare CSS" in the public directories... install them not with <code>--symlink</code>, but really making a copy. Once "assetic" has built the compound CSS, and you can DELETE the original CSS from the filesystem, and leave the images:</p>

<p><em>Compilation process</em>
<img src="https://i.stack.imgur.com/KIc7L.jpg" alt="Compilation process"></p>

<p>Note I do this for the <code>--env=prod</code> environment.</p>

<p>Just a few final thoughts:</p>

<ul>
<li><p>This desired behaviour can be achieved by having the images in "public" directory in ***<a href="http://en.wikipedia.org/wiki/Git_%28software%29" rel="noreferrer">Git</a> or ***<a href="http://en.wikipedia.org/wiki/Mercurial" rel="noreferrer">Mercurial</a> and the "css" in the "assets" directory. That is, instead of having them in "public" as shown in the directories, imagine a, b, c... residing in the "assets" instead of "public", than have your installer/deployer (probably a ***<a href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash</a> script) to put the CSS temporarily inside the "public" dir before <code>assets:install</code> is executed, then <code>assets:install</code>, then <code>assetic:dump</code>, and then automating the removal of CSS from the public directory after <code>assetic:dump</code> has been executed. This would achive EXACTLY the behaviour desired in the question.</p></li>
<li><p>Another (unknown if possible) solution would be to explore if "assets:install" can only take "public" as the source or could also take "assets" as a source to publish. That would help when installed with the <code>--symlink</code> option when developing.</p></li>
<li><p>Additionally, if we are going to script the removal from the "public" dir, then, the need of storing them in a separate directory ("assets") disappears. They can live inside "public" in our version-control system as there will be dropped upon deploy to the public. This allows also for the <code>--symlink</code> usage.</p></li>
</ul>

<p><strong>BUT ANYWAY, CAUTION NOW:</strong> As now the originals are not there anymore (<code>rm -Rf</code>), there are only two solutions, not three. The working div "B" does not work anymore as it was an asset() call assuming there was the original asset. Only "C" (the compiled one) will work.</p>

<p>So... there is ONLY a FINAL WINNER: Div "C" allows EXACTLY what it was asked in the topic: To be compiled, respect the path to the images and do not expose the original source to the public.</p>

<p><em>The winner is C</em></p>

<p><img src="https://i.stack.imgur.com/3VDuS.jpg" alt="The winner is C">
