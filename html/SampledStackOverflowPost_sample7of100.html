Answered posted on: 2014-05-05 22:34:03+00:00
<a<p>What you have just described is a mix of the following concepts you need to familiarize yourself with:</p>

<ul>
<li>***<a href="http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model" rel="nofollow noreferrer">Entity-Attribute-Value pattern</a> (also Stackoverflow has a bunch of excellent answers on the topic, especially why you should not use EAV);</li>
<li>Database Normalization, especially 6th Normal Form - ***<a href="http://en.wikipedia.org/wiki/Sixth_normal_form" rel="nofollow noreferrer">one</a> and <a href="https://stackoverflow.com/questions/4824714/would-like-to-understand-6nf-with-an-example">two</a> - excellent set of answers on the topic here on Stackoverflow as well;</li>
<li><a href="https://www.google.com/search?q=Graph%20representation%20in%20relational%20database" rel="nofollow noreferrer">Graph representation in relational database</a> - see, many articles are also from Stackoverflow; your case is to represent Direct Acyclic Graph in DB;</li>
<li>Database inheritance patterns - e. g. <a href="http://martinfowler.com/eaaCatalog/classTableInheritance.html" rel="nofollow noreferrer">Class Table Inheritance</a>.</li>
</ul>

<p>So, when I needed to create similar system, I used the concepts listed above (except the EAV) to represent the graph nodes (table for nodes), node types (table for node types), links (table for links), link types (table for link types - appeared to be very fundamental table), allowed links between certain node types (table for allowed links). And then inheriting my problem domain objects from nodes (a table for each object), adding more attributes in them.</p>

<p>A couple of hints:</p>

<ul>
<li>when using the table inheritance - use the FOREIGN KEY with ON DELETE CASCADE constraints to the max, otherwise you will end up with lots of "leaked" records;</li>
<li>don't use triggers for anything except very basic things (like setting field default value);</li>
<li>when implementing DAG, most probably you will end up with <a href="https://www.google.com/search?q=transitive%20closure%20of%20a%20graph" rel="nofollow noreferrer">Transitive Closure of Graph</a> pattern which is quite tedious to code - I used stored functions to manipulate the data and views to select the data;</li>
<li>if you have ability to choose the database for the project, don't choose MySQL ;)</li>
</u
